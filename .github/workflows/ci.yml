name: CI\n\non:\n  push:\n    branches: [ main, develop ]\n  pull_request:\n    branches: [ main ]\n\nenv:\n  CARGO_TERM_COLOR: always\n\njobs:\n  test:\n    name: Test\n    runs-on: ubuntu-latest\n    \n    steps:\n    - name: Checkout code\n      uses: actions/checkout@v4\n      \n    - name: Install Rust\n      uses: dtolnay/rust-toolchain@stable\n      with:\n        components: rustfmt, clippy\n        \n    - name: Cache cargo registry\n      uses: actions/cache@v3\n      with:\n        path: ~/.cargo/registry\n        key: ${{ runner.os }}-cargo-registry-${{ hashFiles('**/Cargo.lock') }}\n        \n    - name: Cache cargo index\n      uses: actions/cache@v3\n      with:\n        path: ~/.cargo/git\n        key: ${{ runner.os }}-cargo-index-${{ hashFiles('**/Cargo.lock') }}\n        \n    - name: Cache cargo build\n      uses: actions/cache@v3\n      with:\n        path: target\n        key: ${{ runner.os }}-cargo-build-target-${{ hashFiles('**/Cargo.lock') }}\n\n    - name: Check formatting\n      run: cargo fmt --all -- --check\n      \n    - name: Run clippy\n      run: cargo clippy --all-targets --all-features -- -D warnings\n      \n    - name: Run tests\n      run: cargo test --verbose\n      \n    - name: Build release\n      run: cargo build --release --verbose\n\n  security:\n    name: Security audit\n    runs-on: ubuntu-latest\n    \n    steps:\n    - name: Checkout code\n      uses: actions/checkout@v4\n      \n    - name: Install Rust\n      uses: dtolnay/rust-toolchain@stable\n      \n    - name: Install cargo-audit\n      run: cargo install cargo-audit\n      \n    - name: Run security audit\n      run: cargo audit\n